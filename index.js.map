{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["\n\n export const createGalleryCardTemplate = imgArr => {\n  return imgArr\n    .map(\n      el => `\n      <li class=\"gallery-card\">\n        <a class=\"gallery-link\" href=\"${el.largeImageURL}\">\n          <img class=\"gallery-img\" src=\"${el.webformatURL}\" alt=\"${el.tags}\" />\n        </a>\n        <div class=\"gallery-info\">\n          <p class=\"info-item\"><strong>Likes</strong> ${el.likes}</p>\n          <p class=\"info-item\"><strong>Views</strong> ${el.views}</p>\n          <p class=\"info-item\"><strong>Comments</strong> ${el.comments}</p>\n          <p class=\"info-item\"><strong>Downloads</strong> ${el.downloads}</p>\n        </div>\n      </li>\n      `\n    )\n    .join('');\n};\n","\nimport axios from 'axios';\n\naxios.defaults.baseURL = 'https://pixabay.com/api/';\n\nexport const fetchPhotosByQuery = (searchedQuery, page) => {\n  const requestParams = {\n    key: '48231881-acbb1e4446b49c7b538272001',\n    q: searchedQuery,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page: page,\n    per_page: 15,\n  };\n    \n\n  return axios.get(`https://pixabay.com/api/`, { params: requestParams });\n};","\nimport { createGalleryCardTemplate } from './js/render-functions';\nimport { fetchPhotosByQuery } from './js/pixabay-api';\nimport iziToast from \"izitoast\";\nimport SimpleLightbox from \"simplelightbox\";\n\nconst searchFormEl = document.querySelector('.js-search-form');\nconst galleryEl = document.querySelector('.js-gallery');\nconst lightbox = new SimpleLightbox('.gallery a', { captionsData: 'alt', captionDelay: 250 });\nconst loadMoreBtnEl = document.querySelector('.js-load-more');\nconst loaderEl = document.querySelector('.js-loader');\nlet page = 1;\nlet inputValue = '';\nlet cardHeight = 0;\n\n\nconst onSearchFormSubmit = async event => {\n    try { \n        event.preventDefault();\n\n        inputValue = event.currentTarget.elements.user_query.value.trim();\n\n    if (!inputValue || inputValue === '') {\n\n        iziToast.error({\n                title: \"❌\",\n                message: `Please enter your query!`,\n                position: \"topRight\",\n                icon: \"\",\n            });\n\n    return; \n    }\n    \n    galleryEl.innerHTML = '';\n    loaderEl.classList.remove('is-hidden');\n    page = 1;\n    loadMoreBtnEl.classList.add('is-hidden');\n    const response = await fetchPhotosByQuery(inputValue, page);\n    loaderEl.classList.add('is-hidden');\n    \n    if (response.data.total === 0) {\n            iziToast.error({\n                title: \"❌\",\n                message: `Sorry, there are no images matching your search query. Please try again!`,\n                position: \"topRight\",\n                icon: \"\",\n            });\n\n        galleryEl.innerHTML = '';\n        searchFormEl.reset();\n\n        return;\n    }\n        \n        if (response.data.totalHits > 15) {\n            loadMoreBtnEl.classList.remove('is-hidden');\n            loadMoreBtnEl.addEventListener('click', onLoadMoreBtnClick);\n    }\n\n        galleryEl.innerHTML = createGalleryCardTemplate(response.data.hits);\n        cardHeight = galleryEl.querySelector('li').getBoundingClientRect().height;\n        loadMoreBtnEl.classList.remove('is-hidden');\n        loadMoreBtnEl.addEventListener('click', onLoadMoreBtnClick);\n        lightbox.refresh();\n    } catch (err) {\n        console.log(err);\n        event.currentTarget.reset(); \n    }\n  \n    };\n    \n\n\nsearchFormEl.addEventListener('submit', onSearchFormSubmit);\n\nconst onLoadMoreBtnClick = async event => {\n            try {\n                page++;\n                const response = await fetchPhotosByQuery(inputValue, page);\n                galleryEl.insertAdjacentHTML('beforeend', createGalleryCardTemplate(response.data.hits));\n                scrollBy({\n                    top: cardHeight * 2,\n                    behavior: 'smooth',\n                });\n\n                const totalPages = Math.ceil(response.data.totalHits / 15);\n                \n                if (page === totalPages) {\n                    loadMoreBtnEl.classList.add('is-hidden');\n                    loadMoreBtnEl.removeEventListener('click', onLoadMoreBtnClick);\n                    iziToast.error({\n                        title: \"❌\",\n                        message: `We're sorry, but you've reached the end of search results.`,\n                        position: \"topRight\",\n                        icon: \"\",\n            });\n\n                    return;\n                }\n                lightbox.refresh();\n            } catch (err) {\n                console.log(err);\n            }\n        };"],"names":["createGalleryCardTemplate","imgArr","el","axios","fetchPhotosByQuery","searchedQuery","page","requestParams","searchFormEl","galleryEl","lightbox","SimpleLightbox","loadMoreBtnEl","loaderEl","inputValue","cardHeight","onSearchFormSubmit","event","iziToast","response","onLoadMoreBtnClick","err","totalPages"],"mappings":"owBAEQ,MAAMA,EAA4BC,GACjCA,EACJ,IACCC,GAAM;AAAA;AAAA,wCAE4BA,EAAG,aAAa;AAAA,0CACdA,EAAG,YAAY,UAAUA,EAAG,IAAI;AAAA;AAAA;AAAA,wDAGlBA,EAAG,KAAK;AAAA,wDACRA,EAAG,KAAK;AAAA,2DACLA,EAAG,QAAQ;AAAA,4DACVA,EAAG,SAAS;AAAA;AAAA;AAAA,OAInE,EACA,KAAK,EAAE,EChBZC,EAAM,SAAS,QAAU,2BAElB,MAAMC,EAAqB,CAACC,EAAeC,IAAS,CACzD,MAAMC,EAAgB,CACpB,IAAK,qCACL,EAAGF,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMC,EACN,SAAU,EACd,EAGE,OAAOH,EAAM,IAAI,2BAA4B,CAAE,OAAQI,CAAa,CAAE,CACxE,ECZMC,EAAe,SAAS,cAAc,iBAAiB,EACvDC,EAAY,SAAS,cAAc,aAAa,EAChDC,EAAW,IAAIC,EAAe,aAAc,CAAE,aAAc,MAAO,aAAc,GAAG,CAAE,EACtFC,EAAgB,SAAS,cAAc,eAAe,EACtDC,EAAW,SAAS,cAAc,YAAY,EACpD,IAAIP,EAAO,EACPQ,EAAa,GACbC,EAAa,EAGjB,MAAMC,EAAqB,MAAMC,GAAS,CACtC,GAAI,CAKJ,GAJIA,EAAM,eAAc,EAEpBH,EAAaG,EAAM,cAAc,SAAS,WAAW,MAAM,OAE3D,CAACH,GAAcA,IAAe,GAAI,CAElCI,EAAS,MAAM,CACP,MAAO,IACP,QAAS,2BACT,SAAU,WACV,KAAM,EACtB,CAAa,EAET,MACC,CAEDT,EAAU,UAAY,GACtBI,EAAS,UAAU,OAAO,WAAW,EACrCP,EAAO,EACPM,EAAc,UAAU,IAAI,WAAW,EACvC,MAAMO,EAAW,MAAMf,EAAmBU,EAAYR,CAAI,EAG1D,GAFAO,EAAS,UAAU,IAAI,WAAW,EAE9BM,EAAS,KAAK,QAAU,EAAG,CACvBD,EAAS,MAAM,CACX,MAAO,IACP,QAAS,2EACT,SAAU,WACV,KAAM,EACtB,CAAa,EAELT,EAAU,UAAY,GACtBD,EAAa,MAAK,EAElB,MACH,CAEOW,EAAS,KAAK,UAAY,KAC1BP,EAAc,UAAU,OAAO,WAAW,EAC1CA,EAAc,iBAAiB,QAASQ,CAAkB,GAG9DX,EAAU,UAAYT,EAA0BmB,EAAS,KAAK,IAAI,EAClEJ,EAAaN,EAAU,cAAc,IAAI,EAAE,sBAAuB,EAAC,OACnEG,EAAc,UAAU,OAAO,WAAW,EAC1CA,EAAc,iBAAiB,QAASQ,CAAkB,EAC1DV,EAAS,QAAO,CACnB,OAAQW,EAAK,CACV,QAAQ,IAAIA,CAAG,EACfJ,EAAM,cAAc,OACvB,CAEL,EAIAT,EAAa,iBAAiB,SAAUQ,CAAkB,EAE1D,MAAMI,EAAqB,MAAMH,GAAS,CAC9B,GAAI,CACAX,IACA,MAAMa,EAAW,MAAMf,EAAmBU,EAAYR,CAAI,EAC1DG,EAAU,mBAAmB,YAAaT,EAA0BmB,EAAS,KAAK,IAAI,CAAC,EACvF,SAAS,CACL,IAAKJ,EAAa,EAClB,SAAU,QAC9B,CAAiB,EAED,MAAMO,EAAa,KAAK,KAAKH,EAAS,KAAK,UAAY,EAAE,EAEzD,GAAIb,IAASgB,EAAY,CACrBV,EAAc,UAAU,IAAI,WAAW,EACvCA,EAAc,oBAAoB,QAASQ,CAAkB,EAC7DF,EAAS,MAAM,CACX,MAAO,IACP,QAAS,6DACT,SAAU,WACV,KAAM,EAC9B,CAAa,EAEO,MACH,CACDR,EAAS,QAAO,CACnB,OAAQW,EAAK,CACV,QAAQ,IAAIA,CAAG,CAClB,CACJ"}